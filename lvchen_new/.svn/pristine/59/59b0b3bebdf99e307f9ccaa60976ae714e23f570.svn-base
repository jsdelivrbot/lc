{"version":3,"sources":["../../src/pages/main/Order/order-modify-page-two/order-modify-page-two.module.ts","../../src/pages/main/Order/order-modify-page-two/order-modify-page-two.ts"],"names":[],"mappings":"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","file":"42.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrderModifyPageTwoPage } from './order-modify-page-two';\n\n@NgModule({\n  declarations: [\n    OrderModifyPageTwoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderModifyPageTwoPage),\n  ],\n})\nexport class OrderModifyPageTwoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/main/Order/order-modify-page-two/order-modify-page-two.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams,Navbar } from 'ionic-angular';\nimport { PopoverController } from 'ionic-angular';\nimport { ViewChild } from '@angular/core';\nimport { AlertController } from 'ionic-angular';\nimport { Keyboard } from '@ionic-native/keyboard';\nimport { AppService } from '../../../../providers/service-public-service/service-public-service';\n/**\n * Generated class for the OrderModifyPageTwoPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-order-modify-page-two',\n  templateUrl: 'order-modify-page-two.html',\n})\nexport class OrderModifyPageTwoPage {\n  @ViewChild(Navbar)navbar:Navbar;\n  data;\n\n  phone = '';\n\n  smsCode = '';\n\n  memo = '';\n\n  smsCodeTime = 0;\n  // 活动\n  public actNameNum:number=1\n  public actName:Array<any>;\n  // 商品\n  public goodsLength:number=1\n  public goods:Array<any>;\n  // 赠品\n  public presentLength:number=1\n  public present:Array<any>;\n  public ids:string;\n  public pres;\n  public actId:Array<number>;\n  protected lipinlength:number=0;\n  protected lipin:Array<any>;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public appservice:AppService,\n    public popover:PopoverController,\n    public alertCtrl:AlertController,\n    private keyboard: Keyboard) {\n      this.keyboard.show();\n      this.phone = navParams.get('phone');\n      this.appservice.getItem('orderList',val=>{\n        console.log(val)\n        this.actName=val['actMap']||[];\n        this.actId=val['actIds']||[];\n        this.actNameNum=this.actName.length||0;\n        this.goods=val['goods']||[];\n        this.goodsLength=this.goods.length||0;\n        this.present=val['gifts']||[];\n        this.presentLength=this.present.length||0;\n        this.lipin=val['presentMap']||[];\n        this.lipinlength=this.lipin.length||0;\n        this.pres=val['presentMap']||[];\n        this.ids=val['ids'].replace(/\\\"/gi,'');\n      })\n  }\n\n  ionViewDidLoad() {\n    this.navbar.backButtonClick = (e:UIEvent)=>{\n      let confirm = this.alertCtrl.create({\n        title: '提示',\n        message: '您的操作未完成，确定要退出？',\n        buttons: [\n          {\n            text: '确定',\n            handler: () => {\n              this.navCtrl.popToRoot()\n            }\n          },\n          {\n            text: '取消',\n            handler: () => {\n            }\n          }\n        ]\n      });\n      confirm.present();\n    }\n  }\n  codeScan(id){\n   \n    let popover=this.popover.create('CodeviewPage',id);\n    popover.present();\n  }\n  OrderScanner(){\n    this.navCtrl.pop();\n  }\n  submit(){\n   \n    if(!/\\d{6}/.test(this.smsCode)){\n      this.appservice.alert('验证码有误差');\n      return;\n    }\n    var goodsAry=[];\n    for(var i=0;i<this.goods.length;i++){\n      goodsAry.push({goodsId:this.goods[i].goodsId,code:this.goods[i].code,saleType:0,actId:this.goods[i]['actId']})\n    }\n    var gifts=[];\n    for(var j=0;j<this.present.length;j++){\n      gifts.push({goodsId:this.present[j].goodsId,code:this.present[j].code,actId:this.present[j].actId,saleType:1})\n    }\n    var pres=[];\n    if(this.pres.length>=1){\n      for(var k=0;k<this.pres.length;k++){\n        pres.push({goodsId:this.pres[k]['goodsId'],num:this.pres[k].num})\n      }\n    }\n    var resultObject={\n      goods:goodsAry.concat(gifts),\n      gifts:pres,\n      actId:this.actId\n    }\n    console.log(resultObject)\n    this.appservice.httpPost('submitChengeCasPosSaleOrder.api',\n      {\n      phone:this.phone,\n      smsCode:this.smsCode,\n      ids:this.ids,\n      resultObject:JSON.stringify(resultObject)\n    },data=>{\n      console.log(data)\n        if(data.code==1){\n          this.appservice.setItem('orderT',data.data)\n          this.navCtrl.push('OrderModifyPageThreePage',{\n            animation: 'md-transition'\n          })\n        }else{\n          this.appservice.toast(data.msg)\n        }\n    },true)\n  }\n  sendCode(){\n    \n    if (this.smsCodeTime > 0 ) {\n      return;\n    }\n\n    var _father=this;\n\n    this.appservice.httpPost('get_phone_code.api',\n      {\n        'phone':this.phone,\n        'code':'4'\n      },data => {\n      console.log(data);\n      if (data.code == -1) {\n         _father.appservice.toast(data.msg);\n      }else{\n        _father.smsCodeTime = 60;\n        var interval = setInterval(()=> {\n          _father.smsCodeTime -= 1;\n          if (_father.smsCodeTime <= 0) {\n              clearInterval(interval);\n          }\n        },1000);\n      }\n    },true);           \n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/main/Order/order-modify-page-two/order-modify-page-two.ts"],"sourceRoot":""}