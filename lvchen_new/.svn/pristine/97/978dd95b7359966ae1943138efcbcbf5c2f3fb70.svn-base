{"version":3,"sources":["../../src/pages/grantMarket/zone-ranking/zone-ranking.module.ts","../../src/pages/grantMarket/zone-ranking/zone-ranking.ts"],"names":[],"mappings":"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","file":"54.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ZoneRankingPage } from './zone-ranking';\n\n@NgModule({\n  declarations: [\n    ZoneRankingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ZoneRankingPage),\n  ],\n})\nexport class ZoneRankingPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/grantMarket/zone-ranking/zone-ranking.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AppService } from '../../../providers/service-public-service/service-public-service';\nimport { ViewChild } from '@angular/core';\nimport { Content } from 'ionic-angular';\n\n/**\n * Generated class for the ZoneRankingPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\ninterface zoneListData {\n  storeId?;\n  states: any;\n  type: number\n}\n@IonicPage()\n@Component({\n  selector: 'page-zone-ranking',\n  templateUrl: 'zone-ranking.html',\n})\nexport class ZoneRankingPage {\n  @ViewChild(Content) content: Content;\n  public storeMap;\n  public storeMapLength: boolean;\n  public storeSelected: string = '';\n  // 合计:\n  public amountA: number = 0;\n  public amountB: number = 0;\n  public amountC: number = 0;\n  // tabType\n  public tabType: number = 1;\n  // senceList\n  public senceList: any[] = [];\n  // 月份\n  public monthly = [];\n  // zone\n  public zone: any[] = [];\n  // 区域索引\n  public index = 0;\n  // 顶部tab栏\n  public tabOption = 1;\n  public zoneListHidden = false;\n  // country Ranking\n  public rank: number = 1;\n  public averageSale: number = 0;\n  public mySale: number = 0;\n  public middleNumberSale: number = 0;\n  public percentage: string = '0%';\n  public firstDistance: number = 0;\n  public lastDistance: number = 0;\n\n  public storeOpt: any = ''\n\n  // 本身的storeId\n  public storeId: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public appService: AppService) {\n    this.zoneList({ states: '', type: this.tabType })\n    this.OrgUser();\n    this.appService.getItem('curStore', val => {\n      this.storeId = val['id']\n      // console.log(this.storeId)\n    })\n  }\n\n  /**\n   * @method  Store 业务组选择\n   * @param {} \n   * @return {void}\n   */\n  Store(): void {\n    if (this.storeSelected != this.storeOpt || !this.storeSelected) {\n      this.zoneList({ storeId: this.storeSelected, states: '', type: this.tabType })\n    }\n  }\n\n  /**\n   * @method  tabSelect tab切换\n   * @param {tapOption:number} 1销售额 2会员数\n   * @return {boolean}\n   */\n  tabSelect(tapOption: number): boolean {\n\n    if (this.tabOption === tapOption) {\n      return false;\n    }\n    this.index = 0;\n    console.log(tapOption)\n    this.tabOption = tapOption;\n    this.tabType = tapOption;\n    this.monthly = [];\n\n    this.zoneList({ states: '', type: this.tabType })\n    this.progress(this.tabType, '');\n  }\n\n  /**\n   * @method  zoneList 默认进来请求\n   * @param {zoneListData} 片区状态，以及类型\n   * @return {void} 无返回值\n   */\n\n  zoneList(obj: zoneListData): void {\n    this.appService.httpPost('findOrgSortAnalysis.api', {\n      type: obj.type,\n      states: obj.states\n    }, data => {\n      if (data.code == 1) {\n        console.log(data)\n        this.senceList = data['listMap'] || [];\n\n        this.amountA = data['amountA'];\n        this.amountB = data['amountB'];\n        this.amountC = data['amountC'];\n        if (data['day']) {\n          data['day'].forEach(element => {\n            this.monthly.unshift(element.substr(-2).replace(/0/, ''))\n          })\n        }\n        this.zone = data['gradeMap'];\n        if (this.zone.length > 0) {\n          this.zoneListHidden = true;\n        } else {\n          this.zoneListHidden = false;\n        }\n        console.log(this.amountB + '/' + this.amountA + '/' + this.amountC)\n      } else {\n        this.navCtrl.popToRoot({ animation: 'md-transition' });\n        this.appService.alert(`${data.msg}`);\n      }\n    }, true)\n  }\n\n  /**\n   * @method  zoneTap 区域选择\n   * @param {index索引，zoneId:区域id} 片区状态，以及类型\n   * @return {void} 无返回值\n   */\n  zoneTap(index: any, zoneId: any): boolean {\n    if (this.index == index) {\n      return false\n    }\n    this.index = index\n    this.monthly = [];\n    this.progress(this.tabType, zoneId);\n    this.zoneList({ storeId: this.storeSelected, states: zoneId, type: this.tabType })\n  }\n\n\n  /**\n * @method OrgUser 判断事业部\n * @param {} 默认空读取本地储存的userId storeId\n * @return {void} 无返回值\n */\n  OrgUser(): void {\n    this.appService.httpPost('findOrgUser.api', {}, data => {\n      console.log(data)\n      this.storeMap = data['orgMap'] || [];\n      this.storeMapLength = this.storeMap.length > 0 ? true : false;\n      if (!this.storeMapLength) {\n        this.progress(this.tabType)\n      }\n    })\n  }\n\n\n  /**\n   * @method progress 全国排名，只有当不存在事业部时候才有\n   * @param {states:number,type:tabType}\n   * @return {void} 无返回值\n   *  // country Ranking\n    public rank:number=1;\n    public averageSale:number=0;\n    public mySale:number=0;\n    public middleNumberSale:number=0;\n    public percentage:string='0%';\n    public firstDistance:number=0;\n    public lastDistance:number=0;\n   * \n   * \n   */\n  progress(tabType: number, zoneId?): void {\n    this.appService.httpPost('getOrgSortAnalysis.api', { states: zoneId, type: tabType }, data => {\n      this.rank = data['date']['sort'] || 0;\n      this.averageSale = data['date']['averageAmount'] || 0;\n      this.mySale = data['date']['sumAmount'] || 0;\n      this.middleNumberSale = data['date']['medianAmount'] || 0;\n      this.firstDistance = data['date']['distancefirst'] || 0;\n      this.lastDistance = data['date']['distanceLast'] || 0;\n      this.percentage = (data['date']['percentage'] + '%') || '0%';\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/grantMarket/zone-ranking/zone-ranking.ts"],"sourceRoot":""}