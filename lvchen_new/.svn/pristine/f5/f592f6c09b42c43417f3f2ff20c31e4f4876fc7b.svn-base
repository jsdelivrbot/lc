{"version":3,"sources":["../../src/pages/Business/business-course-serach/business-course-serach.module.ts","../../src/pages/Business/business-course-serach/business-course-serach.ts"],"names":[],"mappings":"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","file":"85.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BusinessCourseSerachPage } from './business-course-serach';\n\n@NgModule({\n  declarations: [\n    BusinessCourseSerachPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BusinessCourseSerachPage),\n  ],\n})\nexport class BusinessCourseSerachPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Business/business-course-serach/business-course-serach.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { AppService, AppGlobal } from '../../../providers/service-public-service/service-public-service';\n\n/**\n * Generated class for the BusinessCourseSerachPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-business-course-serach',\n  templateUrl: 'business-course-serach.html',\n})\nexport class BusinessCourseSerachPage {\n  // 搜索字段\n  public searchTitle: string = \"\";\n  // 搜索历史\n  public searchHistory: Array<any> = [];\n  // 是否展示搜索历史\n  public showHistory: boolean = true;\n  // 搜索结果列表\n  public coursesList: Array<any> = [];\n  // 课程类型数组\n  public coursesType: Array<any> = [];\n  public coursesTypeColors: Array<any> = [];\n  // 能否搜索\n  public canDoSearch: boolean = true;\n  // 是否有下一页\n  public hasNextPage: boolean = false;\n  // 获取行数\n  public rows: number = 20;\n  // 页数\n  public page: number = 1;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    public appService: AppService,\n    public appUrl: AppGlobal) {\n  }\n\n  ionViewDidLoad() {\n    this.getSearchHistory();\n  }\n\n  // 搜索\n  search() {\n    this.page = 1;\n    this.coursesList = [];\n    // 设置不能搜索\n    this.canDoSearch = false;\n    // 隐藏历史记录\n    this.showHistory = false;\n\n    this.getCourses(1);\n    this.recordSearchHistory();\n  }\n\n  // 取消搜索\n  cancelModal() {\n    this.navCtrl.pop({\n      animation: 'md-transition'\n    });\n  }\n\n  // 获取课程\n  getCourses($event) {\n    this.appService.httpPost(\"business_getCourses\", {\n      title: this.searchTitle,\n      page: this.page,\n      rows: this.rows\n    }, (res) => {\n      if (res.code == 1) {\n        // 获取数据\n        this.coursesList = this.coursesList.concat(res.map.listMap);\n        // 随机颜色\n        this.colorTag(res.map.listMap);\n        // 可以继续搜索\n        this.canDoSearch = true;\n        // 判断是否有下一页\n        if (res.map.listMap.length < this.rows) {\n          this.hasNextPage = false;\n        }\n        else {\n          this.hasNextPage = true;\n        }\n        // 加载更多完成\n        if ($event != 1) {\n          $event.complete();\n        }\n      }\n      else {\n        this.appService.alert(res.msg);\n        // 可以继续搜索\n        this.canDoSearch = true;\n        // 加载更多完成\n        if ($event != 1) {\n          $event.complete();\n        }\n      }\n    }, !this.hasNextPage)\n  }\n\n  // 获取历史搜索记录\n  getSearchHistory() {\n    this.appService.getItem(\"searchHistory\", (obj) => {\n      if (obj != 1) {\n        this.searchHistory = obj;\n      }\n      else {\n        this.searchHistory = [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"];\n      }\n    });\n  }\n\n  // 记录搜索记录\n  recordSearchHistory() {\n    let index = this.searchHistory.indexOf(this.searchTitle);\n    // 如果记录已经有了，把他提到最前面\n    if (index != -1) {\n      let temp = this.searchHistory.splice(index, 1);\n      this.searchHistory.unshift(temp);\n    }\n    // 没有记录就删除最后一条，然后将新纪录加在最前面\n    else if (this.searchTitle) {\n      this.searchHistory.pop();\n      this.searchHistory.unshift(this.searchTitle);\n    }\n    // 存储在本地\n    this.appService.setItem(\"searchHistory\", this.searchHistory);\n  }\n\n  // 给标签添加颜色\n  colorTag(list) {\n    for (let i = 0; i < list.length; i++) {\n      if (this.coursesType.indexOf(list[i]['courseType']) == -1) {\n        this.coursesType.push(list[i].courseType);\n      }\n    }\n    for (let i = this.coursesTypeColors.length; i < this.coursesType.length; i++) {\n      this.getColor(this.coursesTypeColors);\n    }\n  }\n\n  // 随机颜色\n  getColor(arr) {\n    let newColor = \"rgba(\" + (Math.random() * 100 + 100) + \",\" + (Math.random() * 100 + 100) + \",\" + (Math.random() * 100 + 100) + \",1)\";\n    if (arr.indexOf(newColor) != -1) {\n      this.getColor(arr);\n    }\n    else {\n      arr.push(newColor);\n    }\n  }\n\n  // 加载更多数据\n  getMoreData($event) {\n    this.page++;\n    this.getCourses($event);\n  }\n\n  // 展开详情页\n  goToCourseDetail(id) {\n    this.navCtrl.push('BusinessCourseDetailPage', { id: id });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Business/business-course-serach/business-course-serach.ts"],"sourceRoot":""}