{"version":3,"sources":["../../src/pages/grantMarket/store-ranking/store-ranking.module.ts","../../src/pages/grantMarket/store-ranking/store-ranking.ts"],"names":[],"mappings":"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","file":"55.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { StoreRankingPage } from './store-ranking';\n\n@NgModule({\n  declarations: [\n    StoreRankingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(StoreRankingPage),\n  ],\n})\nexport class StoreRankingPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/grantMarket/store-ranking/store-ranking.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AppService } from '../../../providers/service-public-service/service-public-service';\nimport { ViewChild } from '@angular/core';\nimport { Content } from 'ionic-angular';\n\n/**\n * Generated class for the StoreRankingPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-store-ranking',\n  templateUrl: 'store-ranking.html',\n})\nexport class StoreRankingPage {\n  @ViewChild(Content) content: Content;\n  private storeSelected: string = '';\n  public type = false;\n  public total: Object = {};\n  public data = [];\n  public i = 1;\n  public refresh = true;\n  // select store\n  public storeMap;\n  public storeMapLength: boolean;\n  // 月份\n  public monthly = [];\n  // 导购全国排名\n  public shopperRanking: number = 1;\n  // 销售额平均数\n  public averageAmount: number = 0;\n  // 我的销售额\n  public userAmount: number = 0;\n  // 中位数销售额\n  public medianAmount: number = 0;\n  // 销售额百分比\n  public percentage: string = '';\n  // 上一名\n  public distanceLast: number = 0;\n  // 与第一名相差\n  public distanceFirst: number = 0;\n  // 导购新会员排名\n  public memshopperRanking: number = 1;\n  // 销售额平均数\n  public memaverageAmount: number = 0;\n  // 我的销售额\n  public memuserAmount: number = 0;\n  // 中位数销售额\n  public memmedianAmount: number = 0;\n  // 销售额百分比\n  public mempercentage: string = '';\n  // 上一名\n  public memdistanceLast: number = 0;\n  // 与第一名相差\n  public memdistanceFirst: number = 0;\n   // 本身的storeId\n   public storeId:any;\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public appService: AppService) {\n      this.appService.getItem('curStore',val=>{\n        this.storeId=val['id']\n        console.log(this.storeId)\n      })\n    this.RankingData(this.i)\n  }\n  Store() {\n    this.i = 1;\n    this.data = [];\n    this.monthly = [];\n    this.content.scrollToTop(0);\n    this.RankingData(this.i, this.storeSelected);\n  }\n\n  doInfinite($event) {\n    this.RankingData(this.i, this.storeSelected, $event);\n  }\n  RankingData(i: number, storeId?, $event?): void {\n    const obj={ page: i, 'storeId': storeId?Number(storeId):Number(this.storeId),rows:20};\n    this.appService.httpPost('findStoreSortAnalysis.api', obj, data => {\n      \n      this.type = data['type'];\n      if (data.code != 1) {\n        this.appService.alert(`${data.msg}`)\n      }\n      if (data['type'] == 2) {\n        this.refresh = false;\n        this.shopperRanking = data['sort'] || 1;\n        this.averageAmount = data['averageAmount'] | 0;\n        this.userAmount = data['sumAmount'] || 0;\n        this.medianAmount = data['medianAmount'] || 0;\n        this.distanceFirst = data['distancefirst'] || 0;\n        this.distanceLast = data['distanceLast'] || 0;\n        this.percentage = '' + (data['percentage'] || 0) + '%';\n        this.memshopperRanking = data['memsort'] || 1;\n        this.memaverageAmount = data['memaverageAmount'] | 0;\n        this.memuserAmount = data['memsumAmount'] || 0;\n        this.memmedianAmount = data['memmedianAmount'] || 0;\n        this.memdistanceFirst = data['memdistancefirst'] || 0;\n        this.memdistanceLast = data['memdistanceLast'] || 0;\n        this.mempercentage = '' + (data['mempercentage'] || 0) + '%';\n        console.log(this.percentage)\n      }\n      if (data['type'] == 1) {\n        if (i == 1) {\n          //  重置content大小\n          this.content.resize();\n          this.OrgUser();\n          //  第一页\n          this.total = data['totalMap'] || {};\n          // console.log(data['day'])\n          data['day'].forEach(element => {\n            this.monthly.unshift(element.substr(-2).replace(/0/, ''))\n          })\n        }\n        if (data.length >= 20) {\n          this.data = this.data.concat(data || [])\n          this.i++;\n        } else {\n          this.data = this.data.concat(data || [])\n          this.refresh = false;\n        }\n        if ($event) {\n          $event.complete();\n        }\n      }\n    })\n  }\n  // 判断是否为绿臣总部\n  OrgUser() {\n    this.appService.httpPost('findOrgUser.api', { storeId: '' }, data => {\n      console.log(data)\n      this.storeMap = data['orgMap'] || [];\n      this.storeMapLength = this.storeMap.length > 0 ? true : false;;\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/grantMarket/store-ranking/store-ranking.ts"],"sourceRoot":""}