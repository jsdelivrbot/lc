{"version":3,"sources":["../../src/pages/grantMarket/owe-count/owe-count.module.ts","../../src/pages/grantMarket/owe-count/owe-count.ts"],"names":[],"mappings":"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","file":"65.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OweCountPage } from './owe-count';\n\n@NgModule({\n  declarations: [\n    OweCountPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OweCountPage),\n  ],\n})\nexport class OweCountPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/grantMarket/owe-count/owe-count.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\nimport { AppService } from '../../../providers/service-public-service/service-public-service';\n\n/**\n * Generated class for the OweCountPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-owe-count',\n  templateUrl: 'owe-count.html',\n})\nexport class OweCountPage {\n  // 当前业务组名称和id\n  public storeName: string = \"业务组\";\n  public storeId: number = 1;\n  // 商品id\n  public goodsId: number = -1;\n  // 下一级业务组\n  public nextOrg: Array<any> = [];\n  // 当前数据\n  public thisDataArr: Array<any> = [];\n  // 合计\n  public oweMemberCount: number = 0;\n  public oweStorerCount: number = 0;\n  // 是门店还是业务组\n  public isStore: boolean = true;\n\n  identity = 0; //-1业务员，1员工，2、3导购\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public appService: AppService,\n    private alertCtrl: AlertController) {\n    this.appService.getItem('userInfo', val => {\n      this.identity = val['tag'];\n    })\n  }\n\n  ionViewDidLoad() {\n    // 判断是否二级页面\n    if (this.navParams.data.goodsName) {\n      this.storeName = this.navParams.data.goodsName;\n      this.goodsId = this.navParams.data.goodsId;\n      this.storeId = this.navParams.data.storeId;\n      this.identity = 2;\n      this.isStore = this.navParams.data.isStore;\n      this.getDetail();\n    }\n    else {\n      // 获取业务组名称\n      this.appService.getItem(\"curStore\", (obj) => {\n        this.storeName = obj.storeName;\n        this.storeId = obj.id;\n      });\n      // 获取业务组\n      this.getNextOrg();\n      // 获取当前数据\n      this.getThisData();\n    }\n  }\n\n  // 获取当前数据\n  getThisData() {\n    this.appService.httpPost(\"findOwningGoods.api\", {}\n      , (res) => {\n        if (res.code == 1) {\n          this.thisDataArr = res.data;\n          // 计算合计\n          this.oweStorerCount = this.oweMemberCount = 0;\n          for (let i = 0; i < this.thisDataArr.length; i++) {\n            this.oweStorerCount += this.thisDataArr[i].oweStore;\n            this.oweMemberCount += this.thisDataArr[i].oweMember;\n          }\n        }\n        else {\n          this.appService.alert(res.msg);\n        }\n      }, true);\n  }\n\n  // 获取下级业务组数据\n  getOtherOrgData(storeId) {\n    this.appService.httpPost(\"findOwningGoods.api\", {\n      storeId\n    }, (res) => {\n      if (res.code == 1) {\n        this.thisDataArr = res.data;\n        // 计算合计\n        this.oweStorerCount = this.oweMemberCount = 0;\n        for (let i = 0; i < this.thisDataArr.length; i++) {\n          this.oweStorerCount += this.thisDataArr[i].oweStore;\n          this.oweMemberCount += this.thisDataArr[i].oweMember;\n        }\n      }\n      else {\n        this.appService.alert(res.msg);\n      }\n    }, true);\n  }\n\n  // 获取下一级业务组\n  getNextOrg() {\n    this.appService.httpPost(\"getNextOrg.api\", {}\n      , (res) => {\n        if (res.code == 1) {\n          this.nextOrg = res.data;\n          // 处理业务组数据\n          for (let i = 0; i < this.nextOrg.length; i++) {\n            this.nextOrg[i] = {\n              type: 'radio',\n              label: this.nextOrg[i].orgName,\n              value: [this.nextOrg[i].orgId, this.nextOrg[i].orgName]\n            }\n          }\n          // 将当前业务组插入最前面\n          this.nextOrg.unshift({\n            type: 'radio',\n            label: this.storeName,\n            value: [this.storeId, this.storeName]\n          });\n        }\n      }, true);\n  }\n\n  // 选择下一级\n  showNextOrg() {\n    if (this.nextOrg.length < 1) {\n      return;\n    }\n    let alert = this.alertCtrl.create({\n      title: '选择业务组',\n      inputs: this.nextOrg,\n      buttons: [\n        {\n          text: '取消',\n          role: 'cancel',\n          handler: data => {\n          }\n        },\n        {\n          text: '确定',\n          handler: data => {\n            // 选了业务组以后拿业务组数据\n            if (data) {\n              this.storeId = data[0];\n              this.getOtherOrgData(data[0]);\n              this.storeName = data[1];\n            }\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  // 查看详情\n  showDetail(goodsName, goodsId) {\n    if (this.identity == 2 || this.identity == 3) {\n      return;\n    }\n    this.navCtrl.push(OweCountPage, {\n      goodsName,\n      goodsId,\n      storeId: this.storeId,\n      isStore: this.nextOrg.length > 0\n    });\n  }\n\n  // 获取详情\n  getDetail() {\n    this.appService.httpPost(\"findOwningGoodsDtl.api\", {\n      storeId: this.storeId,\n      goodsId: this.goodsId\n    }, (res) => {\n      if (res.code == 1) {\n        this.thisDataArr = res.data;\n        this.oweMemberCount = res.oweMember;\n        this.oweStorerCount = res.oweStore;\n      }\n      else {\n        this.appService.alert(res.msg);\n      }\n    }, true)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/grantMarket/owe-count/owe-count.ts"],"sourceRoot":""}