{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"52.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams ,Platform,Events} from 'ionic-angular';\nimport { AppService } from '../../providers/service-public-service/service-public-service'\nimport { Keyboard } from '@ionic-native/keyboard';\nimport { ViewChild } from '@angular/core';\nimport { Navbar } from 'ionic-angular';\nimport { App } from 'ionic-angular';\n\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  @ViewChild(Navbar)navbar:Navbar;\n  driverToken = '';\n\n  securityCodeTime = 0;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private appService: AppService,\n    private platform: Platform,\n    private event: Events,\n    private keyboard: Keyboard,\n    public app:App) {\n\n     \n  }\n  ionViewDidLoad() {\n\n    this.appService.getItem('driverToken',(val) => {\n      if(val==1){\n       this.driverToken = '';\n      }else{\n       this.driverToken = val;\n      }\n    });\n\n    this.appService.getItem('userInfo',(val) => {\n      console.log(val);\n      if (val && val!=1) {\n        this.appService.getItem('loginInfo',(val) => {\n          this.login(val);\n        }); \n      }\n    }); \n\n    this.keyboard.onKeyboardShow().subscribe(() => this.event.publish('hideTabs'));\n    this.keyboard.onKeyboardHide().subscribe(() => this.event.publish('showTabs'));\n   \n    this.platform.registerBackButtonAction(() => {\n    });\n\n    this.navCtrl.swipeBackEnabled=false;\n   \n  }\n\n \n  login(value:any){\n\n    if (value.phone.length != 11) {\n      this.appService.alert('请输入正确的手机号码！');\n      return;\n    }else if (!value.password) {\n      this.appService.alert('请输入密码！');\n      return;\n    }\n\n    var param = {'phone': value.phone,'password':value.password};\n \n    if (!this.driverToken) {\n      if (!value.code) {\n        this.appService.alert('请输入验证码！');\n        return;\n      }\n      param['smsCode'] = value.code;\n    }else{\n      param['driverToken'] = this.driverToken;\n    }\n   \n    this.appService.httpPost('login_submit.api',param,data => {\n      if (data.code == -1) {\n         this.appService.toast(data.msg);\n      }else{\n        this.appService.setItem('driverToken',data.map.driverToken);\n        this.appService.setItem('userInfo',data.map);\n        this.appService.setItem('loginInfo',{'phone':value.phone,'password':value.password});\n        this.app.getRootNav().setRoot('TabsPage')\n      }\n    },true);\n   \n\n  }\n\n  sendCode(phone:any){\n    console.log(phone)\n    if (this.securityCodeTime > 0 ) {\n      return;\n    }\n\n    var _father=this;\n\n    if (phone.length != 11) {\n      this.appService.alert('请输入正确的手机号码！');\n      return;\n    }\n\n    this.appService.httpPost('getUserPhone.api',{'phone':phone},data=>{\n      if(data.code==-1){\n        this.appService.toast(data.msg)\n      }else{\n        this.appService.httpPost('get_phone_code.api',{'phone':phone,'code':3},data => {\n          if (data.code == -1) {\n             _father.appService.toast(data.msg);\n          }else{\n            _father.securityCodeTime = 60;\n            var interval = setInterval(()=> {\n              _father.securityCodeTime -= 1;\n              if (_father.securityCodeTime <= 0) {\n                  clearInterval(interval);\n              }\n            },1000);\n          }\n        },true);\n      }\n    },true)\n             \n\n  }\n\n  forgetPassword() {\n    this.navCtrl.push('ForgetPasswordPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}