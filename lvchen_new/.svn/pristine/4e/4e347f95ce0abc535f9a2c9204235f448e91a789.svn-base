{"version":3,"sources":["../../src/pages/Business/business-course-detail/business-course-detail.module.ts","../../src/pages/Business/business-course-detail/business-course-detail.ts"],"names":[],"mappings":"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","file":"86.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BusinessCourseDetailPage } from './business-course-detail';\n\n@NgModule({\n  declarations: [\n    BusinessCourseDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BusinessCourseDetailPage),\n  ],\n})\nexport class BusinessCourseDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Business/business-course-detail/business-course-detail.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Navbar } from 'ionic-angular';\nimport { AppService, AppGlobal } from '../../../providers/service-public-service/service-public-service';\n\n/**\n * Generated class for the BusinessCourseDetailPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-business-course-detail',\n  templateUrl: 'business-course-detail.html',\n})\nexport class BusinessCourseDetailPage {\n  @ViewChild(Navbar) navBar: Navbar;\n  // 课程详情\n  public courseDetail: object = {};\n  // 考试id\n  public examId: number = 0;\n  // 是否已收藏\n  public collState: number = 0;\n  // 文件类型\n  public fileRoute: number = 2;\n  // 是否需要考试\n  public examState: number = 1;\n  // 是否已经学习\n  public studyState: number = 0;\n  // 开始学习\n  public studing: boolean = false;\n  public readTimeLong: number = 0;\n  public readSeconds: number = 0;\n  public readHours: number = 0;\n  // 定时器\n  public timer;\n\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public appService: AppService,\n    public appUrl: AppGlobal) {\n  }\n\n  ionViewDidLoad() {\n    this.navBar.backButtonClick = () => {\n      clearTimeout(this.timer);\n      this.navCtrl.pop({\n        animation: 'md-transition'\n      });\n    }\n    this.getCourseDetail();\n  }\n\n  // 获取课程详情\n  getCourseDetail() {\n    this.appService.httpPost(\"business_courseDetail\", {\n      courseId: this.navParams.data.id || 56\n    }, (res) => {\n      if (res.code == 1) {\n        this.courseDetail = res.map.course;\n        this.collState = res.map.collState;\n        this.examState = res.map.examState;\n        this.studyState = res.map.studyState;\n        this.examId = res.map.examId;\n        // 判断文件类型\n        this.judgefileRoute(res.map.course.fileRoute);\n      }\n      else {\n        this.appService.alert(res.msg);\n      }\n    }, true);\n  }\n\n  // 判断课程文件类型\n  judgefileRoute(fileRoute: string) {\n    if (fileRoute.toLocaleLowerCase().indexOf(\".mp3\") != -1 || fileRoute.toLocaleLowerCase().indexOf(\".amr\") != -1) {\n      this.fileRoute = 0;\n    }\n    else if (fileRoute != \"\") {\n      this.fileRoute = 1;\n    }\n  }\n\n  // 收藏\n  collCourse(id) {\n    // 修改当前收藏状态\n    this.collState = this.collState == 1 ? 0 : 1;\n    // 提交收藏状态\n    this.appService.httpPost(\"business_courseColl\", {\n      courseId: this.navParams.data.id || 56,\n      collState: this.collState\n    }, (res) => {\n      this.appService.alert(res.msg);\n      // 失败的话，改回原来的收藏状态\n      if (res.code != 1) {\n        this.collState = this.collState == 1 ? 0 : 1;\n      }\n    }, true);\n  }\n\n  // 我要学习\n  startTolearn() {\n    this.studyState = 1;\n    // 计算分钟\n    this.readTimeLong = this.courseDetail[\"readTimeLong\"] % 60;\n    // 计算小时\n    this.readHours = Math.floor(this.courseDetail[\"readTimeLong\"] / 60);\n    this.studing = true;\n    this.startCountDown();\n  }\n\n  // 学习倒数\n  startCountDown() {\n    this.readSeconds--;\n    if (this.readSeconds < 0) {\n      this.readTimeLong--;\n      if (this.readTimeLong < 0) {\n        this.readHours--;\n        if (this.readHours < 0) {\n          this.appService.httpPost(\"business_courseSucc\", {\n            courseId: this.navParams.data.id || 56,\n            isSucc: 1\n          }, (res) => {\n            if (res.code == 1) {\n              this.appService.alert(res.msg);\n            }\n            else {\n              this.studyState = 0;\n              this.appService.alert(res.msg);\n            }\n          });\n          this.studing = false;\n          return;\n        }\n        this.readTimeLong = 59;\n      }\n      this.readSeconds = 59;\n    }\n    this.timer = setTimeout(() => {\n      this.startCountDown();\n    }, 1000);\n  }\n\n  // 我要考试\n  startExam() {\n    if (this.studyState == 0 || this.studing) {\n      this.appService.alert(\"请先完成学习！\");\n      return;\n    }\n    this.navCtrl.push('BusinessExamStartPage', {\n      id: this.courseDetail['id']\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Business/business-course-detail/business-course-detail.ts"],"sourceRoot":""}