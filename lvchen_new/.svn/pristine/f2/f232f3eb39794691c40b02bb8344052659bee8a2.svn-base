{"version":3,"sources":["../../src/pages/main/myCustomer/customer-logging-tabs/customer-logging-tabs.module.ts","../../src/pages/main/myCustomer/customer-logging-tabs/customer-logging-tabs.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACkB;AAUlE;IAAA;IAA4C,CAAC;IAAhC,6BAA6B;QARzC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uFAAuB;aACxB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uFAAuB,CAAC;aAClD;SACF,CAAC;OACW,6BAA6B,CAAG;IAAD,oCAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;ACZA;AACe;AACwC;AAEjG;;;;;GAKG;AAOH;IAUE,iCACS,OAAsB,EACtB,SAAoB,EACpB,UAAsB;QAFtB,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,eAAU,GAAV,UAAU,CAAY;QAXxB,aAAQ,GAAe,EAAE,CAAC;QAC1B,WAAM,GAAe,EAAE,CAAC;QACxB,WAAM,GAAe,EAAE,CAAC;QACxB,kBAAa,GAAe,EAAE,CAAC;QAC/B,gBAAW,GAAe,EAAE,CAAC;QAC7B,eAAU,GAAY,KAAK,CAAC;IAOnC,CAAC;IAED,gDAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;QAC1C,IAAI,CAAC,OAAO,EAAE,CAAC;QACf,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC7B,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;IACH,CAAC;IAED,OAAO;IACP,yCAAO,GAAP;QAAA,iBAkCC;QAjCC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,wBAAwB,EAAE;YACjD,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC;SAClE,EAAE,UAAC,GAAG;YACL,OAAO;YACP,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;gBAClB,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAC/B,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBACrC,GAAG,CAAC,CAAC,IAAM,IAAI,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;4BACrC,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;gCACjB,IAAI,EAAE,IAAI;gCACV,SAAS,EAAE,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;6BACnC,CAAC,CAAC;wBACL,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;YACD,OAAO;YACP,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;gBAClB,GAAG,CAAC,CAAC,IAAM,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;oBAC7B,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;wBACnC,GAAG,CAAC,CAAC,IAAM,IAAI,IAAI,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;4BACnC,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC;gCACf,IAAI,EAAE,IAAI;gCACV,SAAS,EAAE,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;6BACjC,CAAC,CAAC;wBACL,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC;YAChC,CAAC;QACH,CAAC,CAAC;IACJ,CAAC;IAED,YAAY;IACZ,8CAAY,GAAZ;QAAA,iBAYC;QAXC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,sBAAsB,EAAE;YAC/C,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW;SACxD,EAAE,UAAC,GAAG;YACL,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;gBAClB,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,CAAC;gBACnC,KAAI,CAAC,aAAa,GAAG,GAAG,CAAC,aAAa,CAAC;YACzC,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjC,CAAC;QACH,CAAC,CAAC;IACJ,CAAC;IAED,OAAO;IACP,2CAAS,GAAT,UAAU,KAAK;QACb,QAAQ;QACR,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QACpD,CAAC;QAED,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1B,CAAC;IACH,CAAC;IAED,MAAM;IACN,0CAAQ,GAAR;QACE,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,KAAK;IACL,wCAAM,GAAN;QAAA,iBA8BC;QA7BC,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC;QAC1C,IAAI,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACvC,IAAI,GAAG,GAAG,0BAA0B,CAAC;QACrC,IAAI,MAAM,GAAG;YACX,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;SACnC,CAAC;QACF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,CAAC;QACjC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAC7B,GAAG,GAAG,4BAA4B,CAAC;YACnC,IAAI,OAAO,GAAG;gBACZ,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC;gBACvB,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC;gBACtB,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC;aACrB;YACD,IAAI,GAAG,OAAO,CAAC;YACf,MAAM,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;YACnC,MAAM,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAChD,CAAC;QAED,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,UAAC,GAAG;YACxC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;gBAClB,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;gBAC/B,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,oBAAoB,EAAE,EAAE,WAAW,EAAE,KAAI,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;YACnF,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjC,CAAC;QACH,CAAC,EAAE,IAAI,CAAC;IAEV,CAAC;IA5HU,uBAAuB;QAJnC,wEAAS,CAAC;YACT,QAAQ,EAAE,4BAA4B;WACG;SAC1C,CAAC;6EAY+B;YACX,4GAAS;YACR,UAAU;OAbpB,uBAAuB,CA6HnC;IAAD,CAAC;AAAA;SA7HY,uBAAuB,iB","file":"31.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CustomerLoggingTabsPage } from './customer-logging-tabs';\n\n@NgModule({\n  declarations: [\n    CustomerLoggingTabsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CustomerLoggingTabsPage),\n  ],\n})\nexport class CustomerLoggingTabsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/main/myCustomer/customer-logging-tabs/customer-logging-tabs.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AppService } from '../../../../providers/service-public-service/service-public-service';\n\n/**\n * Generated class for the CustomerLoggingTabsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-customer-logging-tabs',\n  templateUrl: 'customer-logging-tabs.html',\n})\nexport class CustomerLoggingTabsPage {\n\n  public products: Array<any> = [];\n  public habits: Array<any> = [];\n  public labels: Array<any> = [];\n  public checkProducts: Array<any> = [];\n  public checkHabits: Array<any> = [];\n  public isDisabled: boolean = false;\n  public phone: string;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public appService: AppService) {\n  }\n\n  ionViewDidLoad() {\n    console.log('加载 CustomerLoggingTabsPage');\n    this.getTabs();\n    if (this.navParams.data.type) {\n      this.getCheckTabs();\n    }\n  }\n\n  // 获取标签\n  getTabs() {\n    this.appService.httpPost(\"findAllMemberLabel.api\", {\n      userId: JSON.parse(window.localStorage.getItem('userInfo'))['id']\n    }, (res) => {\n      // 获取产品\n      if (res.code == 1) {\n        for (const key in res.products) {\n          if (res.products.hasOwnProperty(key)) {\n            for (const key2 in res.products[key]) {\n              this.products.push({\n                'id': key2,\n                'tabName': res.products[key][key2]\n              });\n            }\n          }\n        }\n      }\n      // 获取习惯\n      if (res.code == 1) {\n        for (const key in res.habits) {\n          if (res.habits.hasOwnProperty(key)) {\n            for (const key2 in res.habits[key]) {\n              this.habits.push({\n                'id': key2,\n                'tabName': res.habits[key][key2]\n              });\n            }\n          }\n        }\n      }\n      else {\n        this.appService.alert(res.log)\n      }\n    })\n  }\n\n  // 获取已经选中的标签\n  getCheckTabs() {\n    this.appService.httpPost(\"editMemberDetail.api\", {\n      memberPhone: this.navParams.data.memberData.memberPhone\n    }, (res) => {\n      if (res.code == 1) {\n        this.checkHabits = res.checkHabits;\n        this.checkProducts = res.checkProducts;\n      }\n      else {\n        this.appService.alert(res.msg);\n      }\n    })\n  }\n\n  // 选择标签\n  selectTab(tabId) {\n    // 存在就删除\n    if (this.labels.indexOf(tabId) != -1) {\n      this.labels.splice(this.labels.indexOf(tabId), 1);\n    }\n    // 不存在就添加\n    else {\n      this.labels.push(tabId);\n    }\n  }\n\n  // 上一步\n  lastStep() {\n    this.navCtrl.pop();\n  }\n\n  // 提交\n  submit() {\n    let data = this.navParams.data.memberData;\n    data['labels'] = this.labels.join(\",\");\n    let url = \"submitNewMemberLabel.api\";\n    let params = {\n      resultObject: JSON.stringify(data)\n    };\n    this.phone = data['memberPhone'];\n    if (this.navParams.data.type) {\n      url = \"editSubmitMemberDetail.api\";\n      let newdata = {\n        remark: data['remarks'],\n        labels: data['labels'],\n        babys: data['babys'],\n      }\n      data = newdata;\n      params['memberPhone'] = this.phone;\n      params['resultObject'] = JSON.stringify(data);\n    }\n\n    this.appService.httpPost(url, params, (res) => {\n      if (res.code == 1) {\n        this.appService.alert(res.msg);\n        this.navCtrl.push('MyCustomerInfoPage', { memberPhone: this.phone, type: true });\n      }\n      else {\n        this.appService.alert(res.msg);\n      }\n    }, true)\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/main/myCustomer/customer-logging-tabs/customer-logging-tabs.ts"],"sourceRoot":""}